<% content_for :title, "Animal Photo Gallery" %>
<%= breadcrumb_nav( @animal.owner ? [@animal.owner, @animal] : [@animal] ) %>
<section class="border_top">
  <div class="row">
	<fieldset>
	  	<%= image_tag(@animal.avatar.url, size: '50x50', class: "picture_border_2") if @animal.avatar_stored? %> 
	  <h4><%= @animal.name %> Pictures</h4>
	  
	  <ul class="small-block-grid-2 medium-block-grid-3 large-block-grid-4">
	    <% for picture in @pictures %>
		  <li>
	    	<%= link_to image_tag(picture.image.url, class: 'th'), edit_animal_picture_path(@animal, picture), "data-reveal-id" => "editPictureModal", 'data-no-turbolink' => true, remote: true %>
	    	</br>
	    	<%= link_to image_tag('cross.png', :alt => "del"), animal_picture_path(@animal, picture), method: :delete, confirm: 'Remove this picture?' %>
		  </li>
		  
	    <% end %>
	  </ul>
	  
		
	  <%= form_for([@animal, @picture], html: { "data-abide" => '' }) do |f| %>
		<div class="row">
	      <div class="large-4 columns">
		    <%= f.file_field :image, class: 'upload_picture', required: true %>
		    <small class="error">File required.</small>
		  </div>
		</div>
		<%= f.hidden_field :animal_id, value: @animal.id %>
		<div class="actions">       
		  <%= f.submit 'Upload photo' %>
		</div>
	  <% end %>
	
	<%= link_to 'back', @animal.owner %>
	</fieldset>
  </div>
</section>

<div id="editPictureModal" class="reveal-modal">
  <div id="picture_edit_div"></div>
  
  <a class="close-reveal-modal">&#215;</a>
</div>
