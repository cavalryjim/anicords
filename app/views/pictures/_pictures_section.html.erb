<section>
  <div class="row">
	<fieldset>
	  	<%= image_tag(@animal.avatar.url, size: '50x50', class: "picture_border_2") if @animal.avatar_stored? %> 
	  <h4><%= @animal.name %> Pictures</h4>
	  
	  <ul class="small-block-grid-2 medium-block-grid-3 large-block-grid-4">
	    <% for picture in @animal.pictures %>
		  <li>
	    	<%= link_to_if picture.image.present?, image_tag(picture.image_location, class: 'th'), edit_animal_picture_path(@animal, picture), "data-reveal-id" => "editPictureModal", remote: true %>
	    	</br>
	    	<%= link_to image_tag('cross.png', :alt => "del"), animal_picture_path(@animal, picture), method: :delete, 
	    		data: { confirm: 'Remove this picture?' }, remote: true %>
	    	    <!--- JDavis: only allow croping of images uploaded through AnimalMinder. Perhaps this should include Petfinder images. --->
		    <% if picture.image.present? && @animal.owner.class.name == "Household" %>
		      &nbsp; &nbsp; &nbsp; &nbsp;
		      <%= link_to image_tag(s3_url('crop_icon.png')), edit_animal_picture_path(@animal, picture), "data-reveal-id" => "editPictureModal", remote: true %>
		    <% end %>
		  </li>
		  
	    <% end %>
	  </ul>
	  
		
	  <%= form_for([@animal, Picture.new], remote: true, html: { id: "animal_picture_upload", "data-abide" => '' }) do |f| %>
		<div class="row">
	      <div class="large-4 columns">
		    <%= f.file_field :image, class: 'upload_picture', required: true %>
		    <small class="error">File required.</small>
		  </div>
		</div>
		<%= f.hidden_field :animal_id, value: @animal.id %>
		<div class="actions">       
		  <%= f.submit 'upload photo', class: "button small" %>
		</div>
	  <% end %>
	
	<%= link_to 'back', @animal.owner %>
	</fieldset>
  </div>
</section>
