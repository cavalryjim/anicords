<% content_for :title, "Animal Organization" %>
<section class="border_top">
	
 <div class="row">
  <fieldset>
  	
  <h4><%= @organization.name %> <small><%= link_to ' (edit)', edit_organization_path(@organization), 'data-no-turbolink' => true %></small></h4>
  <div class="large-12 columns">
	<fieldset>
	  	<% if @organization.animals.count == 0 %>
		  <h4>Tell us about your animals</h4>
		<% end %>
	    
	    <table class="datatable">
		  <thead>
			<tr>
			  <th>Animal</th>
			  <th>Species</th>
			  <th>Breed</th>
			  <th>Transfer</th>
			</tr>
		  </thead>
		  <tbody>
		    <% @animals.each do |animal| %>
		      <tr>
			    <td><%= link_to animal.name, edit_organization_animal_path(@organization, animal) %></td>
			    <td><%= animal.species %></td>
			    <td><%= animal.breed %></td>
			    <td><%= link_to button_small("transfer"), organization_animal_path(@organization, animal), "data-reveal-id" => "transferAnimalModal", remote: true %></td>
			  </tr>
			<% end %>
		  </tbody>
		</table>
			
	    <%= button_to "Add Animal", "#", "data-reveal-id" => "newAnimalModal" %> 
	</fieldset>
   </div>
  </fieldset>
 </div>
 
</section>


<div id="newAnimalModal" class="reveal-modal">
  <h3>New Animal</h3>
  <%= form_for [@organization, Animal.new] do |f| %>
  
    <div class="row">
	  <div class="large-12 columns">
		<%= f.text_field :name, placeholder: "Animal's name" %>
      </div>
    </div>
		    
	<div class="row">
	  <div class="large-6 columns">
	    <%= f.collection_select :animal_type_id, AnimalType.all, :id, :name, {prompt:'Species'}, {class: "regular_select"} %>
	  </div>
	</div>
	<%= f.hidden_field :owner_id, value: @organization.id %>	 
	<%= f.hidden_field :owner_type, value: @organization.class.name %>       
    <div class="actions">
	  <%= f.submit %>
	</div>
    
  <% end %>
  
  <a class="close-reveal-modal">&#215;</a>
</div>

<div id="showAnimalModal" class="reveal-modal">
  <div id="animal_show_div"></div>
  
  <a class="close-reveal-modal">&#215;</a>
</div>

<div id="transferAnimalModal" class="reveal-modal">
  <div id="animal_transfer_div"></div>
  
  <a class="close-reveal-modal">&#215;</a>
</div>
